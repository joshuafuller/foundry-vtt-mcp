<form class="eci-settings">
  <section class="eci-block">
    <h2 class="eci-title">Map Generation Service</h2>
    <p class="eci-note">
      Configure your AI-powered battlemap creation service. ComfyUI runs locally on the same machine as your MCP server (where Claude Desktop is installed).
    </p>
  </section>

  <hr class="eci-divider"/>

  <section class="eci-block">
    <h3 class="eci-subtitle">Service Status</h3>
    <div class="eci-status-container">
      <div class="eci-status {{connectionStatus}}" id="connection-status">
        <span id="status-text">{{connectionStatusText}}</span>
      </div>
      <div class="eci-controls">
        <button type="button" class="eci-btn check" id="check-status-btn">
          <i class="fas fa-sync"></i> Check Status
        </button>
        <button type="button" class="eci-btn start" id="start-service-btn">
          <i class="fas fa-play"></i> Start Service
        </button>
        <button type="button" class="eci-btn stop" id="stop-service-btn">
          <i class="fas fa-stop"></i> Stop Service
        </button>
      </div>
    </div>
  </section>

  <hr class="eci-divider"/>

  <section class="eci-block eci-settings-block">
    <h3 class="eci-subtitle">Service Settings</h3>

    <label class="eci-check">
      <input type="checkbox" name="autoStartService" {{#if autoStartService}}checked{{/if}} />
      <span>
        <strong>Auto-start Map Generation Service</strong> â€” Automatically start ComfyUI when Foundry loads.
      </span>
    </label>

    <div class="form-group">
      <label for="mapGenQuality">
        <strong>Generation Quality</strong>
      </label>
      <select name="mapGenQuality" id="mapGenQuality">
        <option value="low" {{#if (eq mapGenQuality "low")}}selected{{/if}}>Low</option>
        <option value="medium" {{#if (eq mapGenQuality "medium")}}selected{{/if}}>Medium</option>
        <option value="high" {{#if (eq mapGenQuality "high")}}selected{{/if}}>High</option>
      </select>
      <p class="notes">Higher quality = better detail but slower generation. Generation time depends on your hardware.</p>
    </div>
  </section>

  <hr class="eci-divider"/>

  <div class="form-footer">
    <button type="submit" class="eci-btn"><i class="fas fa-save"></i> Apply Settings</button>
  </div>
</form>